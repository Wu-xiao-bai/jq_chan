(function(t){function e(e){for(var n,s,o=e[0],l=e[1],c=e[2],u=0,p=[];u<o.length;u++)s=o[u],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&p.push(r[s][0]),r[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);d&&d(e);while(p.length)p.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,o=1;o<a.length;o++){var l=a[o];0!==r[l]&&(n=!1)}n&&(i.splice(e--,1),t=s(s.s=a[0]))}return t}var n={},r={app:0},i=[];function s(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=n,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var d=l;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"1d77":function(t,e,a){"use strict";var n=a("1ed6"),r=a.n(n);r.a},"1ed6":function(t,e,a){},"32a6":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n,r,i,s,o=a("2b0e"),l=a("5c96"),c=a.n(l),d=(a("0fae"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)}),u=[],p=a("2877"),h={},f=Object(p["a"])(h,d,u,!1,null,null,null),m=f.exports,b=a("8c4f"),_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"kline"}},[t._m(0),a("br"),a("div",{staticClass:"k-forms"},[a("el-form",{staticClass:"form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"参数配置: "}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"请输入标的代码",placement:"top-start"}},[a("el-input",{attrs:{placeholder:"请输入标的代码"},model:{value:t.ts_code_new,callback:function(e){t.ts_code_new=e},expression:"ts_code_new"}})],1)],1),a("el-form-item",[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"请选择资产类型",placement:"top-start"}},[a("el-select",{attrs:{placeholder:"资产类型"},model:{value:t.asset_new,callback:function(e){t.asset_new=e},expression:"asset_new"}},t._l(t.asset_types,(function(t){return a("div",{key:t},[a("el-option",{attrs:{label:t,value:t}})],1)})),0)],1)],1),a("el-form-item",{attrs:{label:"K线级别: "}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"请选择需要展示的多个级别 K 线",placement:"top-start"}},[a("el-checkbox-group",{attrs:{size:"large",fill:"#606266","text-color":"#ffffff"},model:{value:t.levels_checked,callback:function(e){t.levels_checked=e},expression:"levels_checked"}},t._l(t.levels,(function(e){return a("el-checkbox-button",{key:e,attrs:{label:e}},[t._v(t._s(e))])})),1)],1)],1),a("el-form-item",[a("span",{staticClass:"date-picker"},[t._v("请选择交易日期： ")]),a("el-date-picker",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{align:"right",type:"date",placeholder:"选择日期","value-format":"yyyyMMdd","picker-options":t.pickerOptions},model:{value:t.trade_date_new,callback:function(e){t.trade_date_new=e},expression:"trade_date_new"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.updatePara}},[t._v("更新参数")])],1)],1)],1),"E"===t.asset?a("Basic",{attrs:{ts_code:t.ts_code}}):t._e(),t._l(t.freqs.split(","),(function(e){return a("div",{key:e},[a("plot-kline",{attrs:{freq:e,ts_code:t.ts_code,asset:t.asset,trade_date:t.trade_date}})],1)})),a("Footer")],2)},v=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{staticClass:"navbar is-dark is-fixed-top",attrs:{role:"navigation","aria-label":"main navigation"}},[a("div",{staticClass:"navbar-menu",attrs:{id:"navbarChan"}},[a("div",{staticClass:"navbar-brand"},[a("a",{staticClass:"navbar-item",attrs:{href:""}},[t._v(" Tushare - 缠论分析工具 ")]),a("a",{staticClass:"navbar-burger burger",attrs:{role:"button","aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample"}},[a("span",{attrs:{"aria-hidden":"true"}}),a("span",{attrs:{"aria-hidden":"true"}}),a("span",{attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"navbar-start"}),a("div",{staticClass:"navbar-end"},[a("div",{staticClass:"navbar-item"},[a("div",{staticClass:"buttons"},[a("a",{staticClass:"button is-primary"},[a("strong",[t._v("Sign up")])]),a("a",{staticClass:"button is-light"},[t._v(" Log in ")])])])])])])}],g=(a("99af"),a("a15b"),a("ac1f"),a("1276"),function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)}),x=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("footer",{staticClass:"footer"},[a("div",{staticClass:"content has-text-centered"},[a("p",[a("strong",[t._v("Chan")]),t._v(" by "),a("a",{attrs:{href:"https://github.com/zengbin93/chan"}},[t._v("zengbin93")]),t._v(". The source code is licensed "),a("a",{attrs:{href:"http://opensource.org/licenses/mit-license.php"}},[t._v("MIT")]),t._v(". ")])])])}],y={},w=Object(p["a"])(y,g,x,!1,null,null,null),k=w.exports,S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"section"},[a("div",{staticStyle:{height:"580px"},attrs:{id:t.chart_id}})])},C=[],I=(a("fb6a"),a("0d03"),a("a434"),a("b680"),"#1f212d"),A="#F9293E",z="#00aa3b",q="#39afe6",O="#da6ee8",L="#00940b";function M(t){for(var e=[],a=[],n=[],r=[],i=[],s=[],o=0;o<t.length;o++)e.push(t[o]),a.push(t[o].splice(0,1)[0]),n.push(t[o][4]),r.push(t[o][6]),i.push(t[o][7]),s.push(t[o][8]);return{datas:e,times:a,vols:n,fx:r,bi:i,xd:s}}function j(t,e){for(var a=[],n=0,r=e.times.length;n<r;n++)if(n<t)a.push("-");else{for(var i=0,s=0;s<t;s++)i+=e.datas[n-s][1];a.push((i/t).toFixed(2))}return a}function E(t,e){var a=M(t),n=s(12,26,9,a.datas,1);return{title:e,tooltip:{trigger:"axis",axisPointer:{type:"cross"},backgroundColor:"rgba(245, 245, 245, 0.8)",borderWidth:1,borderColor:"#ccc",padding:10,textStyle:{color:"#000"},position:function(t,e,a,n,r){var i={top:10};return i[["left","right"][+(t[0]<r.viewSize[0]/2)]]=30,i},extraCssText:"width: 170px"},toolbox:{feature:{dataZoom:{yAxisIndex:!1},brush:{type:["lineX","clear"]}}},brush:{xAxisIndex:"all",brushLink:"all",outOfBrush:{colorAlpha:.1}},legend:{icon:"rect",type:"scroll",itemWidth:14,itemHeight:2,left:"25%",top:"1%",animation:!0,textStyle:{fontSize:12,color:"#0e99e2"},pageIconColor:"#0e99e2"},axisPointer:{show:!0},color:[q,O,L],grid:[{id:"gd1",left:"0%",right:"1%",height:"58%",top:"12%"},{left:"0%",right:"1%",top:"74%",height:"8%"},{left:"0%",right:"1%",top:"86%",height:"10%"}],xAxis:[{type:"category",data:a.times,scale:!0,boundaryGap:!1,axisLine:{onZero:!1},axisLabel:{show:!1},splitLine:{show:!1,lineStyle:{color:"#3a3a3e"}},splitNumber:20,min:"dataMin",max:"dataMax"},{type:"category",gridIndex:1,data:a.times,axisLabel:{color:"#9b9da9",fontSize:10}},{type:"category",gridIndex:2,data:a.times,axisLabel:{show:!1}}],yAxis:[{scale:!0,z:4,axisLabel:{color:"#c7c7c7",inside:!0},splitLine:{show:!1,lineStyle:{color:"#181a23"}}},{gridIndex:1,splitNumber:3,z:4,axisLine:{onZero:!1},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{color:"#c7c7c7",inside:!0,fontSize:8}},{z:4,gridIndex:2,splitNumber:4,axisLine:{onZero:!1},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{color:"#c7c7c7",inside:!0,fontSize:8}}],dataZoom:[{type:"slider",xAxisIndex:[0,1,2],start:100,end:80,throttle:10,top:"96%",height:"4%",borderColor:"#696969",textStyle:{color:"#dcdcdc"},handleSize:"60%",handleIcon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4v1.3h1.3v-1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z",dataBackground:{lineStyle:{color:"#fff"},areaStyle:{color:"#696969"}}},{type:"inside",xAxisIndex:[0,1,2],start:98,end:100}],animation:!1,backgroundColor:I,blendMode:"source-over",series:[{name:"K线",type:"candlestick",data:a.datas,barWidth:"68%",large:!0,largeThreshold:100,itemStyle:{normal:{color:A,color0:z,borderColor:A,borderColor0:z,opacity:.8}}},{name:"MA5",type:"line",data:j(5,a),smooth:!0,symbol:"none",lineStyle:{normal:{opacity:.8,color:q,width:1}}},{name:"MA20",type:"line",data:j(20,a),smooth:!0,symbol:"none",lineStyle:{opacity:.8,width:1,color:O}},{name:"MA250",type:"line",data:j(250,a),smooth:!0,symbol:"none",lineStyle:{normal:{opacity:.8,width:1,color:L}}},{name:"分型",type:"scatter",xAxisIndex:0,yAxisIndex:0,symbolSize:4,data:a.fx},{name:"笔标记",type:"scatter",xAxisIndex:0,yAxisIndex:0,symbol:"diamond",symbolSize:10,data:a.bi,label:{show:!1,position:"right",margin:4}},{name:"线段标记",type:"scatter",xAxisIndex:0,yAxisIndex:0,symbol:"triangle",symbolSize:10,data:a.xd,label:{show:!0,position:"right",margin:8}},{name:"Volumn",type:"bar",xAxisIndex:1,yAxisIndex:1,data:a.vols,barWidth:"60%",itemStyle:{normal:{color:function(t){var e;return e=a.datas[t.dataIndex][1]>a.datas[t.dataIndex][0]?A:z,e}}}},{name:"MACD",type:"bar",xAxisIndex:2,yAxisIndex:2,data:n.macd,barWidth:"40%",itemStyle:{normal:{color:function(t){var e;return e=t.data>=0?A:z,e}}}},{name:"DIF",type:"line",symbol:"none",xAxisIndex:2,yAxisIndex:2,data:n.dif,lineStyle:{normal:{color:"#da6ee8",width:1}}},{name:"DEA",type:"line",symbol:"none",xAxisIndex:2,yAxisIndex:2,data:n.dea,lineStyle:{normal:{opacity:.8,color:"#39afe6",width:1}}}]}}n=function(t,e,a){var n,r,i,s;if(s=2/(t+1),a)for(i=[e[0][a]],n=1,r=e.length;n<r;n++)i.push((s*e[n][a]+(1-s)*i[n-1]).toFixed(2));else for(i=[e[0]],n=1,r=e.length;n<r;n++)i.push((s*e[n]+(1-s)*i[n-1]).toFixed(3));return i},r=function(t,e,a,r){var i,s,o,l,c;for(o=[],l=n(t,a,r),c=n(e,a,r),i=0,s=a.length;i<s;i++)o.push((l[i]-c[i]).toFixed(3));return o},i=function(t,e){return n(t,e)},s=function(t,e,a,n,s){var o,l,c,d,u,p;for(p={},u=[],c=r(t,e,n,s),d=i(a,c),o=0,l=n.length;o<l;o++)u.push((2*(c[o]-d[o])).toFixed(3));return p.dif=c,p.dea=d,p.macd=u,p};var P={api:"http://localhost:8005"},T=a("bc3a"),$=a.n(T),F=a("313e"),B=a.n(F);o["default"].prototype.$echarts=B.a;var K={props:{freq:String,ts_code:String,trade_date:String,asset:String},data:function(){return{loading:!0,status:""}},computed:{chart_id:function(){return"chart-"+this.freq},params:function(){return{ts_code:this.ts_code,freq:this.freq,asset:this.asset,trade_date:this.trade_date}}},mounted:function(){this.drawKline()},destroyed:function(){clearInterval(this.timer)},watch:{params:function(t,e){console.log("new: %s, old: %s",t.trade_date,e.trade_date),this.drawKline()}},methods:{drawKline:function(){var t=this;this.loading=!0;var e=P.api+"/kline?ts_code="+this.ts_code+"&freq="+this.freq+"&trade_date="+this.trade_date+"&asset="+this.asset,a=this.$echarts.init(document.getElementById(this.chart_id));a.showLoading({text:"正在加载 "+this.ts_code+" - "+this.freq+" - "+this.trade_date,color:"#c23531",textColor:"red",maskColor:"rgba(255, 255, 255, 0.6)",zlevel:0}),$.a.get(e).then((function(e){var a=e.data;return t.status=a.status,a.kdata})).then((function(e){var n={text:t.ts_code+" - "+t.freq,textStyle:{color:"red",fontSize:24}},r=E(e,n);a.setOption(r),a.hideLoading(),a.onresize=function(){a.resize()}})).catch((function(t){console.log("获取 K 线失败: "+t)}))},isToday:function(t){var e=t.slice(0,4)+"/"+t.slice(4,6)+"/"+t.slice(6,8);return new Date(e).toDateString()==(new Date).toDateString()}}},D=K,W=(a("9ecb"),Object(p["a"])(D,S,C,!1,null,"2996d916",null)),H=W.exports,V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"tile is-ancestor"},[a("div",{staticClass:"tile is-parent"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.basic,stripe:""}},[a("el-table-column",{attrs:{prop:"symbol",label:"交易代码",width:"180",align:"center"}}),a("el-table-column",{attrs:{prop:"name",label:"股票名称",width:"180",align:"center"}}),a("el-table-column",{attrs:{prop:"area",label:"区域",width:"180",align:"center"}}),a("el-table-column",{attrs:{prop:"industry",label:"行业",width:"180",align:"center"}}),a("el-table-column",{attrs:{prop:"market",label:"市场类型",width:"180",align:"center"}}),a("el-table-column",{attrs:{prop:"list_date",label:"上市日期",width:"180",align:"center"}})],1)],1),a("div",{staticClass:"tile is-parent is-4"},[a("el-link",{attrs:{href:t.f10_url,target:"_blank"}},[t._v("同花顺F10")])],1)])])},Z=[],N={props:{ts_code:String},data:function(){return{basic:[{symbol:"",name:"",area:"",industry:"",market:"",list_date:""}],signals:[],dialogTableVisible:!1}},computed:{f10_url:function(){return"http://basic.10jqka.com.cn/".concat(this.ts_code.substring(0,6))}},mounted:function(){this.getBasic()},watch:{ts_code:function(t,e){console.log("new: %s, old: %s",t.end_date,e.end_date),this.getBasic()}},methods:{getBasic:function(){var t=this;this.loading=!0;var e=P.api+"/basic?ts_code="+this.ts_code;$.a.get(e).then((function(e){var a=e.data;console.log(a),t.basic=a.basic})).then((function(){t.loading=!1})).catch((function(e){console.log("获取股票基础信息失败: "+e),t.loading=!1}))}}},J=N,G=Object(p["a"])(J,V,Z,!1,null,null,null),X=G.exports,Q=a("289d");a("5abe");o["default"].use(Q["a"]);var R={name:"kline",props:{ts_code:{type:String,default:"000001.SH"},asset:{type:String,default:"I"},trade_date:{type:String,default:"20200222"},freqs:{type:String,default:"5min,30min"}},data:function(){return{asset_types:["E","I"],levels:["1min","5min","30min","60min","D","W"],ts_code_new:this.ts_code,asset_new:this.asset,levels_checked:this.freqs.split(","),trade_date_new:this.trade_date}},components:{Footer:k,PlotKline:H,Basic:X},mounted:function(){document.title="缠论分析(".concat(this.ts_code_new,"|").concat(this.trade_date_new,")")},methods:{updatePara:function(){this.$router.push("/?ts_code="+this.ts_code_new+"&asset="+this.asset_new+"&trade_date="+this.trade_date_new+"&freqs="+this.levels_checked.join(","))}}},U=R,Y=(a("1d77"),Object(p["a"])(U,_,v,!1,null,null,null)),tt=Y.exports;o["default"].use(b["a"]);var et=[{path:"/",name:"kline",component:tt,meta:{title:"K线"},props:function(t){return{ts_code:t.query.ts_code,asset:t.query.asset,trade_date:t.query.trade_date,freqs:t.query.freqs}}}],at=new b["a"]({mode:"history",routes:et});o["default"].use(c.a),o["default"].config.productionTip=!1,new o["default"]({router:at,render:function(t){return t(m)}}).$mount("#app")},"9ecb":function(t,e,a){"use strict";var n=a("32a6"),r=a.n(n);r.a}});
//# sourceMappingURL=app.fdd123f3.js.map